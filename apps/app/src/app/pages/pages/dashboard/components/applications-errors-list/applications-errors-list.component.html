<clr-datagrid (clrDgRefresh)="refresh.emit($event)" [clrDgLoading]="loading">
  <clr-dg-action-bar>
    <div class="clr-row clr-justify-content-end">
      <button
        type="button"
        class="btn-delete btn btn-sm btn-summary"
        (click)="deleteState()"
      >
        {{ 'pages.sessions.session-detail.table.delete_state' | translate }}
      </button>
    </div>
  </clr-dg-action-bar>

  <clr-dg-column
    clrDgField="Options.ApplicationName"
    [clrDgSortOrder]="getSortOrder('Options.ApplicationName')"
  >
    {{ 'pages.dashboard.table.application_name' | translate }}
    <clr-dg-filter>
      {{ 'global.filters.no-filter-available' | translate }}
    </clr-dg-filter>
  </clr-dg-column>
  <clr-dg-column
    clrDgField="Options.ApplicationVersion"
    [clrDgSortOrder]="getSortOrder('Options.ApplicationVersion')"
  >
    {{ 'pages.dashboard.table.application_version' | translate }}
    <clr-dg-filter>
      {{ 'global.filters.no-filter-available' | translate }}
    </clr-dg-filter>
  </clr-dg-column>
  <clr-dg-column
    clrDgField="SessionId"
    [clrDgSortOrder]="getSortOrder('SessionId')"
  >
    {{ 'pages.dashboard.table.session_id' | translate }}
    <clr-dg-filter>
      {{ 'global.filters.no-filter-available' | translate }}
    </clr-dg-filter>
  </clr-dg-column>
  <clr-dg-column
    clrDgField="EndDate"
    [clrDgSortOrder]="getSortOrder('EndDate')"
    [clrFilterValue]="getFilterValue('EndDate')"
  >
    {{ 'pages.dashboard.table.error_at' | translate }}
    <clr-dg-filter [clrDgFilter]="errorAtFilter">
      <app-since-date-filter
        label="pages.dashboard.table.filters.error_at.label"
        defaultText="pages.dashboard.table.filters.error_at.default"
        text="pages.dashboard.table.filters.error_at.text"
        [selectedValue]="getFilterValue('EndDate')"
        name="EndDate"
        #errorAtFilter
      >
      </app-since-date-filter>
    </clr-dg-filter>
  </clr-dg-column>
  <clr-dg-column>
    {{ 'pages.dashboard.table.error.message' | translate }}
  </clr-dg-column>
  <clr-dg-column *ngIf="isSeqUp">
    {{ 'pages.dashboard.table.error.seq' | translate }}
  </clr-dg-column>

  <clr-dg-row
    *ngFor="let error of applications?.data"
    [ngForTrackBy]="trackErrors"
  >
    <clr-dg-cell>
      <span>
        {{ error.applicationName }}
      </span>
    </clr-dg-cell>
    <clr-dg-cell>
      <span>
        {{ error.applicationVersion }}
      </span>
    </clr-dg-cell>
    <clr-dg-cell>
      <a
        [routerLink]="[
          '/',
          'applications',
          error.applicationName,
          error.applicationVersion,
          'sessions',
          error.sessionId
        ]"
      >
        {{ error.sessionId }}
      </a>
    </clr-dg-cell>
    <clr-dg-cell>
      {{ error.errorAt | date: 'yyyy-MM-dd &nbsp; HH:mm:ss.SSS' }}
    </clr-dg-cell>
    <clr-dg-cell [title]="error.error.message">
      <span>
        {{ excerpt(error.error.message) }}
      </span>
    </clr-dg-cell>
    <clr-dg-cell *ngIf="isSeqUp">
      <a href (click)="onClickSeqLink($event, error.taskId)">
        {{ 'pages.dashboard.table.error.seq_link' | translate }}
      </a>
    </clr-dg-cell>
  </clr-dg-row>

  <clr-dg-footer>
    <clr-dg-pagination
      #pagination
      [clrDgTotalItems]="totalApplications"
      [clrDgPageSize]="pageSize"
      [clrDgPage]="currentPage"
    >
      <clr-dg-page-size [clrPageSizeOptions]="[10, 20, 50, 100]">{{
        'pages.dashboard.table.per_page' | translate
      }}</clr-dg-page-size>
      {{
        (totalApplications > 1
          ? 'pages.dashboard.table.applications'
          : 'pages.dashboard.table.application'
        ) | translate: { value: totalApplications }
      }}
    </clr-dg-pagination>
  </clr-dg-footer>
</clr-datagrid>
