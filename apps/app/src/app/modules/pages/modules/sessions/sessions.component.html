<section>
  <h1>{{ 'sessions.title' | translate }}</h1>

  <app-pages-sessions-session-errors
    [errors]="errors"
  ></app-pages-sessions-session-errors>

  <clr-datagrid [clrDgLoading]="loading">
    <clr-dg-column>
      {{ 'sessions.table.id' | translate }}
    </clr-dg-column>
    <clr-dg-column>
      {{ 'sessions.table.status.title' | translate }}
    </clr-dg-column>
    <clr-dg-column>
      {{ 'sessions.table.actions.title' | translate }}
    </clr-dg-column>

    <clr-dg-placeholder>
      {{ 'sessions.table.placeholder' | translate }}
    </clr-dg-placeholder>

    <clr-dg-row *ngFor="let session of sessions; trackBy: trackBySession">
      <clr-dg-cell class="custom-cell">
        <a [routerLink]="[session.id]">
          <span>
            {{ session.id }}
          </span>
        </a>
      </clr-dg-cell>
      <clr-dg-cell class="custom-cell">
        <span>
          {{
            (session.closed
              ? 'sessions.table.status.closed'
              : 'sessions.table.status.opened'
            ) | translate
          }}
        </span>
      </clr-dg-cell>
      <clr-dg-cell>
        <app-pages-sessions-session-action
          [id]="session.id"
          [closed]="session.closed"
          [title]="getSessionActionTitle(session)"
          (receivedData)="onSessionAction($event)"
          (receivedError)="onSessionActionError($event)"
        ></app-pages-sessions-session-action>
      </clr-dg-cell>
    </clr-dg-row>

    <clr-dg-footer>
      {{
        (sessions.length > 1 ? 'sessions.sessions' : 'sessions.session')
          | translate: { value: sessions.length }
      }}
    </clr-dg-footer>
  </clr-datagrid>
</section>
