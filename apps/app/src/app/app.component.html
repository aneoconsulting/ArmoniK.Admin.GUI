<clr-main-container>
  <clr-header>
    <div class="header-nav">
      <div class="branding">
        <a routerLink="/">
          <span class="title">
            <figure>
              <img src="assets/images/armonik-logo.png" alt="ArmoniK logo" />
            </figure>
            &nbsp; - &nbsp;
            <app-pages-the-header-time></app-pages-the-header-time>
          </span>
        </a>
      </div>
    </div>
    <div class="header-actions">
      <app-pages-the-languages-selector></app-pages-the-languages-selector>
    </div>
  </clr-header>
  <div class="content-container">
    <clr-vertical-nav [clr-nav-level]="1">
      <a clrVerticalNavLink [routerLink]="['/', 'users', 'me']">
        <clr-icon shape="user" clrVerticalNavIcon></clr-icon>
        <ng-container *ngIf="loadingCurrentUser$ | async; else showUser">
          {{ 'navigation.connexion_in_progress' | translate }}
        </ng-container>
      </a>
      <div class="nav-divider"></div>
      <a
        *ngFor="let link of links; trackBy: trackByLabel"
        clrVerticalNavLink
        [routerLink]="link.path"
        [queryParams]="link.queryParams"
        routerLinkActive="active"
      >
        <clr-icon [attr.shape]="link.shape" clrVerticalNavIcon></clr-icon>
        {{ link.label | translate }}</a
      >
      <ng-container
        *ngIf="{
          seq: settingsService.seqSubject$ | async,
          grafana: settingsService.grafanaSubject$ | async
        } as isUp"
      >
        <div class="nav-divider" *ngIf="isUp.seq || isUp.grafana"></div>
        <a clrVerticalNavLink href="/seq/" target="_blank" *ngIf="isUp.seq">
          <clr-icon shape="crosshairs" clrVerticalNavIcon></clr-icon>
          Seq</a
        >
        <a
          clrVerticalNavLink
          href="/grafana/"
          target="_blank"
          *ngIf="isUp.grafana"
        >
          <clr-icon shape="line-chart" clrVerticalNavIcon></clr-icon>
          Grafana</a
        >
      </ng-container>
      <div class="nav-divider"></div>
      <app-pages-the-favorites-navigation></app-pages-the-favorites-navigation>
      <app-pages-the-history-navigation></app-pages-the-history-navigation>
      <div class="bottom">
        <a
          clrVerticalNavLink
          href="https://aneoconsulting.github.io/ArmoniK.Admin.GUI/"
          rel="noopener"
          target="_blank"
        >
          <clr-icon shape="help" clrVerticalNavIcon></clr-icon>
          <span> Documentation </span>
        </a>
        <a
          clrVerticalNavLink
          href="https://github.com/aneoconsulting/ArmoniK.Admin.GUI/releases"
          rel="noopener"
          target="_blank"
        >
          <clr-icon shape="new" clrVerticalNavIcon></clr-icon>
          <span> Changelog </span>
        </a>
        <div class="version">
          <span> Admin GUI </span>
          -
          <span> v0.7.0 </span>
        </div>
      </div>
    </clr-vertical-nav>

    <div class="content-area">
      <app-pages-the-favorites-modal> </app-pages-the-favorites-modal>
      <router-outlet></router-outlet>
    </div>
  </div>
</clr-main-container>

<ng-template #showUser>
  <ng-container *ngIf="currentUser as user; else noUser">
    {{ user.username }}
  </ng-container>
</ng-template>

<ng-template #noUser>
  {{ 'navigation.connexion_failed' | translate }}
</ng-template>
