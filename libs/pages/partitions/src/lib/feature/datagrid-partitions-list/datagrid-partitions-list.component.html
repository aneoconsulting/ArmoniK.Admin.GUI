<clr-datagrid (clrDgRefresh)="onRefresh($event)" [clrDgLoading]="loading">

  <!-- TODO: fix column name using type -->
  <clr-dg-column [clrDgField]="'1'" [clrDgSortOrder]="(getQueryParamsOrderByColumn$('1') | async)!">
    <span i18n> Id </span>
  </clr-dg-column>

  <!-- There a known bug that fire 2 requests when using browser history and navigating from id to priority. Could come from Clarity. -->
  <clr-dg-column [clrDgField]="'2'" [clrDgSortOrder]="(getQueryParamsOrderByColumn$('2') | async)!">
    <span i18n> Priority </span>
  </clr-dg-column>
  <clr-dg-column i18n> Actions </clr-dg-column>

  <ng-container *ngIf="list$ | async as list">
    <clr-dg-row *ngFor="let partition of list.partitions; trackBy: trackByPartition">
      <clr-dg-cell> {{ partition.id }} </clr-dg-cell>
      <clr-dg-cell> {{ partition.priority }} </clr-dg-cell>
      <clr-dg-cell>
        <button type="button" title="Open the modal" i18n-title class="btn btn-sm btn-secondary"
          (click)="viewPartition(partition.id)">
          <cds-icon shape="eye"></cds-icon>
          <span i18n class="sr-only">
            Open the modal
          </span>
        </button>
      </clr-dg-cell>
    </clr-dg-row>
  </ng-container>

  <clr-dg-footer>
    <clr-dg-pagination [clrDgPageSize]="(getQueryParamsPageSize$() | async)!" [clrDgTotalItems]="total"
      [clrDgPage]="(getQueryParamsPage$() | async)!">
      <clr-dg-page-size [clrPageSizeOptions]="[10, 20, 50, 100]">
        <span i18n>Partitions per page</span>
      </clr-dg-page-size>
      <span>
        {{ total }} { total, plural, =1 { partition } other { partitions } }
      </span>
    </clr-dg-pagination>
  </clr-dg-footer>
</clr-datagrid>

<armonik-admin-gui-datagrid-partitions-get [(open)]="open"
  [(partitionId)]="currentPartitionId"></armonik-admin-gui-datagrid-partitions-get>
